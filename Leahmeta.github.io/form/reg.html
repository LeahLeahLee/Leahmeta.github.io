<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>正则表达式</title>
		<style>
			textarea{
				display: block;
				width:100%;
				min-height:300px;
			}
			.bg-yellow{
				background-color: yellow;
			}
			#subject{
				min-height:300px;
				border:1px solid #ccc;
			}
		</style>
	</head>
	<body>
		不要在乎那些细节啦<br>
		输入正则（不用输入界定符）
		<textarea id="pattern"></textarea>
		输入要匹配的文字
		<!-- <textarea id="subject"></textarea> -->
		<div id="subject" contenteditable="true"></div>
		<script>

			var patternEle = document.getElementById("pattern");
			var subjectEle = document.getElementById("subject");
			var str = '';

			patternEle.addEventListener("input",function(){
				try{
					var reg = new RegExp('(' + this.value + ')');
					subjectEle.innerHTML = str.replace(reg,"<span class='bg-yellow'>$1</span>");					
				}catch(e){

				}

			},false);
			subjectEle.addEventListener("input",function(){
				str = this.innerHTML;
			},false);
		</script>
	</body>
</html>